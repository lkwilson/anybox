load_dir_impl() {
  base="$1"
  for i in "$base"/.* "$base"/*; do
    if [ "${i: -2}" == '/.' ] || [ "${i: -3}" == '/..' ]; then
      continue
    fi
    if [ -d "$i" ]; then
      load_dir_impl "$i"
    elif [ -f "$i" ]; then
      skel_files+=("${i: 2}")
    fi
  done
}

load_dir() {
  skel_files=()
  pushd "$1" &>/dev/null
  load_dir_impl .
  popd &>/dev/null
}
